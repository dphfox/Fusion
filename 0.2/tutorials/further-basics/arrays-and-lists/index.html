
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://elttob.uk/Fusion/0.2/tutorials/further-basics/arrays-and-lists/">
      
      <link rel="icon" href="../../../assets/logo-dark.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.2.13">
    
    
      
        <title>Arrays and Lists - Fusion</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/fusion.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="fusion-dark" data-md-color-primary="black" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#computed-arrays" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Fusion" class="md-header__button md-logo" aria-label="Fusion" data-md-component="logo">
      
  <img src="../../../assets/logo-animated.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fusion
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Arrays and Lists
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Elttob/Fusion" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Elttob/Fusion
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../examples/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../api-reference/" class="md-tabs__link">
        API Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../extras/" class="md-tabs__link">
        Extras
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Fusion" class="md-nav__button md-logo" aria-label="Fusion" data-md-component="logo">
      
  <img src="../../../assets/logo-animated.png" alt="logo">

    </a>
    Fusion
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Elttob/Fusion" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Elttob/Fusion
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Get Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Fundamentals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fundamentals" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Fundamentals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/creating-ui/" class="md-nav__link">
        Creating UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/handling-events/" class="md-nav__link">
        Handling Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/storing-state/" class="md-nav__link">
        Storing State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/computations/" class="md-nav__link">
        Computations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/changing-properties/" class="md-nav__link">
        Changing Properties
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/changing-children/" class="md-nav__link">
        Changing Children
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/project-1/" class="md-nav__link">
        Project 1: Counting Clicks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Further Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Further Basics" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Further Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        Components
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Arrays and Lists
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Arrays and Lists
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#computed-arrays" class="md-nav__link">
    Computed Arrays
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-up-values" class="md-nav__link">
    Cleaning Up Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimisation" class="md-nav__link">
    Optimisation
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compatibility/" class="md-nav__link">
        Compatibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../project-2/" class="md-nav__link">
        Project 2: To-Do List
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4">
          Animation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Animation" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Animation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../animation/tweens/" class="md-nav__link">
        Tweens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../animation/springs/" class="md-nav__link">
        Springs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../animation/project-3/" class="md-nav__link">
        Project 3: Switches
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/errors-and-messages/" class="md-nav__link">
        Errors & Messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Instances
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Instances" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Instances
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/new/" class="md-nav__link">
        New
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/children/" class="md-nav__link">
        Children
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/onevent/" class="md-nav__link">
        OnEvent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/onchange/" class="md-nav__link">
        OnChange
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          State Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="State Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          State Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/state/" class="md-nav__link">
        State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/computed/" class="md-nav__link">
        Computed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/computedpairs/" class="md-nav__link">
        ComputedPairs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/compat/" class="md-nav__link">
        Compat
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5">
          Animation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Animation" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Animation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/tween/" class="md-nav__link">
        Tween
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../api-reference/api/spring/" class="md-nav__link">
        Spring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extras" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/backgrounds/" class="md-nav__link">
        Backgrounds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/brand-guidelines/" class="md-nav__link">
        Brand Guidelines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#computed-arrays" class="md-nav__link">
    Computed Arrays
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-up-values" class="md-nav__link">
    Cleaning Up Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimisation" class="md-nav__link">
    Optimisation
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/Elttob/Fusion/edit/master/docs/tutorials/further-basics/arrays-and-lists.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>Arrays and Lists</h1>

<p>Efficiently working with tables can be difficult. Let's learn about the tools
Fusion provides to make working with arrays and tables easier.</p>
<details class="abstract">
<summary>Required code</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">ReplicatedStorage</span> <span class="o">=</span> <span class="n">game</span><span class="p">:</span><span class="n">GetService</span><span class="p">(</span><span class="s2">&quot;ReplicatedStorage&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">Fusion</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="n">ReplicatedStorage</span><span class="p">.</span><span class="n">Fusion</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">State</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">State</span>
<span class="kd">local</span> <span class="n">Computed</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">Computed</span>

<span class="kd">local</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
</details>
<hr />
<h2 id="computed-arrays">Computed Arrays<a class="headerlink" href="#computed-arrays" title="Permanent link">&para;</a></h2>
<p>Suppose we have a state object storing an array of numbers, and we'd like to
create a computed object which doubles each number. You could achieve this with
a for-pairs loop:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">})</span>

<span class="hll"><span class="kd">local</span> <span class="n">doubledNumbers</span> <span class="o">=</span> <span class="n">Computed</span><span class="p">(</span><span class="kr">function</span><span class="p">()</span>
</span><span class="hll">    <span class="kd">local</span> <span class="n">doubled</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class="hll">    <span class="kr">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">number</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">numbers</span><span class="p">:</span><span class="n">get</span><span class="p">())</span> <span class="kr">do</span>
</span><span class="hll">        <span class="n">doubled</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">2</span>
</span><span class="hll">    <span class="kr">end</span>
</span><span class="hll">    <span class="kr">return</span> <span class="n">doubled</span>
</span><span class="hll"><span class="kr">end</span><span class="p">)</span>
</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doubledNumbers</span><span class="p">:</span><span class="n">get</span><span class="p">())</span> <span class="c1">--&gt; {2, 4, 6, 8, 10}</span>
</code></pre></div></td></tr></table></div>
<p>While this works, it's pretty verbose. To make this code simpler, Fusion has a
special computed object designed for processing tables, known as <code>ComputedPairs</code>.</p>
<p>To use it, we need to import <code>ComputedPairs</code> from Fusion:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">ReplicatedStorage</span> <span class="o">=</span> <span class="n">game</span><span class="p">:</span><span class="n">GetService</span><span class="p">(</span><span class="s2">&quot;ReplicatedStorage&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">Fusion</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="n">ReplicatedStorage</span><span class="p">.</span><span class="n">Fusion</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">State</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">State</span>
<span class="kd">local</span> <span class="n">Computed</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">Computed</span>
<span class="kd">local</span> <span class="n">ComputedPairs</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">ComputedPairs</span>
</code></pre></div></td></tr></table></div>
<p><code>ComputedPairs</code> acts similarly to the for-pairs loop we wrote above - it goes
through each entry of the array, processes the value, and saves it into the
new array:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">})</span>

<span class="hll"><span class="kd">local</span> <span class="n">doubledNumbers</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">number</span><span class="p">)</span>
</span><span class="hll">    <span class="kr">return</span> <span class="n">number</span> <span class="o">*</span>  <span class="mi">2</span>
</span><span class="hll"><span class="kr">end</span><span class="p">)</span>
</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doubledNumbers</span><span class="p">:</span><span class="n">get</span><span class="p">())</span> <span class="c1">--&gt; {2, 4, 6, 8, 10}</span>
</code></pre></div></td></tr></table></div>
<p>This can be used to process any kind of table, not just arrays. Notice how the
keys stay the same, and the value is whatever you return:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="n">Blue</span> <span class="o">=</span> <span class="s2">&quot;good&quot;</span><span class="p">,</span> <span class="n">Green</span> <span class="o">=</span> <span class="s2">&quot;bad&quot;</span><span class="p">})</span>

<span class="kd">local</span> <span class="n">processedData</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">colour</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">colour</span> <span class="o">..</span> <span class="s2">&quot; is &quot;</span> <span class="o">..</span> <span class="n">word</span>
<span class="kr">end</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">processedData</span><span class="p">:</span><span class="n">get</span><span class="p">())</span> <span class="c1">--&gt; {Blue = &quot;Blue is good&quot;, Green = &quot;Green is bad&quot;}</span>
</code></pre></div></td></tr></table></div>
<hr />
<h2 id="cleaning-up-values">Cleaning Up Values<a class="headerlink" href="#cleaning-up-values" title="Permanent link">&para;</a></h2>
<p>Sometimes, you might use <code>ComputedPairs</code> to generate lists of instances, or
other similar data types. When we're done with these, we need to destroy them.</p>
<p>Conveniently, <code>ComputedPairs</code> already cleans up some types when they're removed
from the output array:</p>
<ul>
<li>returned instances will be destroyed</li>
<li>returned event connections will be disconnected</li>
<li>returned functions will be run</li>
<li>returned objects will have their <code>:Destroy()</code> or <code>:destroy()</code> methods called</li>
<li>returned arrays will have their contents cleaned up</li>
</ul>
<p>This should cover most use cases by default. However, if you need to override
this cleanup behaviour, you can pass in an optional <code>destructor</code> function as
the second argument. It will be called any time a generated value is removed or
overwritten, so you can clean it up:</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Lua</label><div class="tabbed-content">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">names</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Dave&quot;</span><span class="p">,</span> <span class="s2">&quot;Sebastian&quot;</span><span class="p">})</span>

<span class="kd">local</span> <span class="n">greetings</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span>
    <span class="n">names</span><span class="p">,</span>
    <span class="kr">function</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="kr">return</span> <span class="s2">&quot;Hello, &quot;</span> <span class="o">..</span> <span class="n">name</span>
    <span class="kr">end</span><span class="p">,</span>
<span class="hll">    <span class="kr">function</span><span class="p">(</span><span class="n">greeting</span><span class="p">)</span>
</span><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Removed: &quot;</span> <span class="o">..</span> <span class="n">greeting</span><span class="p">)</span>
</span><span class="hll">    <span class="kr">end</span>
</span><span class="p">)</span>

<span class="n">names</span><span class="p">:</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Trey&quot;</span><span class="p">,</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Expected output</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>Removed: Hello, Dave
Removed: Hello, Sebastian
</code></pre></div>
</div>
</div>
<hr />
<h2 id="optimisation">Optimisation<a class="headerlink" href="#optimisation" title="Permanent link">&para;</a></h2>
<p>To improve performance, <code>ComputedPairs</code> doesn't recalculate a key if its value
stays the same:</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Lua</label><div class="tabbed-content">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span>
    <span class="n">One</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">Two</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">Three</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating processedData...&quot;</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">processedData</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ...recalculating key: &quot;</span> <span class="o">..</span> <span class="n">key</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>
<span class="kr">end</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Changing the values of some keys...&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="p">:</span><span class="n">set</span><span class="p">({</span>
    <span class="n">One</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">Two</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
    <span class="n">Three</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">Four</span> <span class="o">=</span> <span class="mi">4</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">Expected output</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>Creating processedData...
  ...recalculating key: One
  ...recalculating key: Two
  ...recalculating key: Three
Changing the values of some keys...
  ...recalculating key: Two
  ...recalculating key: Four
</code></pre></div>
</div>
</div>
<p>Because the keys <code>Two</code> and <code>Four</code> have different values after the change,
they're recalculated. However, <code>One</code> and <code>Three</code> have the same values, so
they'll be reused instead:</p>
<p><img alt="Diagram showing how keys are cached" src="OptimisedKeyValues.png" /></p>
<p>This is a simple rule which should work well for tables with 'stable keys' (keys
that don't change as other values are added and removed).</p>
<p>However, if you're working with 'unstable keys' (e.g. an array where values can
move to different keys) then you can get unnecessary recalculations. In the
following code, <code>Yellow</code> gets recalculated, because it moves to a different key:</p>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">Lua</label><div class="tabbed-content">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="s2">&quot;Green&quot;</span><span class="p">,</span> <span class="s2">&quot;Blue&quot;</span><span class="p">,</span> <span class="s2">&quot;Yellow&quot;</span><span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating processedData...&quot;</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">processedData</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ...recalculating key: &quot;</span> <span class="o">..</span> <span class="n">key</span> <span class="o">..</span> <span class="s2">&quot; value: &quot;</span> <span class="o">..</span> <span class="n">value</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">value</span>
<span class="kr">end</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Removing Blue...&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="p">:</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="s2">&quot;Green&quot;</span><span class="p">,</span> <span class="s2">&quot;Yellow&quot;</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">Expected output</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>Creating processedData...
  ...recalculating key: 1 value: Red
  ...recalculating key: 2 value: Green
  ...recalculating key: 3 value: Blue
  ...recalculating key: 4 value: Yellow
Moving the values around...
  ...recalculating key: 3 value: Yellow
</code></pre></div>
</div>
</div>
<p>You can see this more clearly in the following diagram - the value of key 3 was
changed, so it triggered a recalculation:</p>
<p><img alt="Diagram showing unstable keys" src="UnstableKeys.png" /></p>
<p>If the keys aren't needed, you can use your values as keys instead. This makes
them stable, because they won't be affected by other insertions or removals:</p>
<div class="tabbed-set" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">Lua</label><div class="tabbed-content">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="hll"><span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="n">Red</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Green</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Blue</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Yellow</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating processedData...&quot;</span><span class="p">)</span>

<span class="hll"><span class="kd">local</span> <span class="n">processedData</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ...recalculating key: &quot;</span> <span class="o">..</span> <span class="n">key</span><span class="p">)</span>
</span><span class="hll">    <span class="kr">return</span> <span class="n">key</span>
</span><span class="hll"><span class="kr">end</span><span class="p">)</span>
</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Removing Blue...&quot;</span><span class="p">)</span>
<span class="hll"><span class="n">data</span><span class="p">:</span><span class="n">set</span><span class="p">({</span><span class="n">Red</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Green</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Yellow</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
<input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><label for="__tabbed_4_2">Expected output</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>Creating processedData...
  ...recalculating key: Red
  ...recalculating key: Green
  ...recalculating key: Blue
  ...recalculating key: Yellow
Removing Blue...
</code></pre></div>
</div>
</div>
<p>Notice that, when we remove <code>Blue</code>, no other values are recalculated. This is
ideal, and means we're not doing unnecessary processing:</p>
<p><img alt="Diagram showing stable keys" src="StableKeys.png" /></p>
<p>This is especially important when optimising 'heavy' arrays, for example long
lists of instances. The less unnecessary recalculation, the better!</p>
<hr />
<p>With that, you should now have a basic idea of how to work with table state in
Fusion. When you get used to this workflow, you can express your logic cleanly,
and get great caching and cleanup behaviour for free.</p>
<details class="abstract">
<summary>Finished code</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">local</span> <span class="n">ReplicatedStorage</span> <span class="o">=</span> <span class="n">game</span><span class="p">:</span><span class="n">GetService</span><span class="p">(</span><span class="s2">&quot;ReplicatedStorage&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">Fusion</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="n">ReplicatedStorage</span><span class="p">.</span><span class="n">Fusion</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">State</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">State</span>
<span class="kd">local</span> <span class="n">Computed</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">Computed</span>
<span class="kd">local</span> <span class="n">ComputedPairs</span> <span class="o">=</span> <span class="n">Fusion</span><span class="p">.</span><span class="n">ComputedPairs</span>

<span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">State</span><span class="p">({</span><span class="n">Red</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Green</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Blue</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Yellow</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating processedData...&quot;</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">processedData</span> <span class="o">=</span> <span class="n">ComputedPairs</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ...recalculating key: &quot;</span> <span class="o">..</span> <span class="n">key</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">key</span>
<span class="kr">end</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Removing Blue...&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="p">:</span><span class="n">set</span><span class="p">({</span><span class="n">Red</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Green</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">Yellow</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
</details>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../components/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Components" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Components
            </div>
          </div>
        </a>
      
      
        
        <a href="../compatibility/" class="md-footer__link md-footer__link--next" aria-label="Next: Compatibility" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Compatibility
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>